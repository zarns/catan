<div class="game-container">
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading game...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <p class="error-message">{{ error }}</p>
  </div>

  <div *ngIf="!loading && !error && gameState" class="game-content">
    <!-- WebSocket connection test display -->
    <div class="websocket-status" *ngIf="greeting">
      <div class="connection-message">{{ greeting }}</div>
    </div>

    <!-- Game header with game info -->
    <div class="game-header">
      <h2>Game #{{ gameState.id }}</h2>
      <div class="game-status" [ngClass]="gameState.status">
        Status: {{ gameState.status | titlecase }}
      </div>
    </div>

    <!-- Game board visualization will go here -->
    <div class="board-container" *ngIf="gameState.game">
      <!-- Placeholder for game board visualization -->
      <div class="board-placeholder">
        <h3>Game Board</h3>
        <p>Board visualization will be implemented soon</p>
      </div>
    </div>

    <!-- Player list with resources and stats -->
    <div class="players-container" *ngIf="gameState.game">
      <h3>Players</h3>
      <div class="player-list">
        <div class="player-card" *ngFor="let player of gameState.game?.players; let i = index" 
            [class.current-player]="i === gameState.game?.current_player_index">
          <div class="player-header" [ngStyle]="{'border-color': player.color}">
            <h4>{{ player.name }}</h4>
            <div class="player-status" *ngIf="i === gameState.game?.current_player_index">Current Turn</div>
          </div>
          <div class="player-stats">
            <div class="stats-row">
              <span>Victory Points:</span>
              <span class="value">{{ player.victory_points }}</span>
            </div>
            <div class="stats-row" *ngIf="player.longest_road">
              <span class="achievement">Longest Road</span>
            </div>
            <div class="stats-row" *ngIf="player.largest_army">
              <span class="achievement">Largest Army</span>
            </div>
            <div class="stats-row">
              <span>Knights:</span>
              <span class="value">{{ player.knights_played }}</span>
            </div>
          </div>
          <div class="resources-container">
            <h5>Resources</h5>
            <div class="resources-grid">
              <div class="resource-item" *ngFor="let resource of getResourceEntries(player)">
                <span class="resource-name">{{ resource.name | titlecase }}:</span>
                <span class="resource-value">{{ resource.count }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 