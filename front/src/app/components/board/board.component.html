<!-- src/app/components/board/board.component.html -->
<div class="board-container">
  <button 
    (click)="hexes = generateDefaultHexPositions()"
    style="position: absolute; top: 10px; left: 10px; z-index: 100;">
    Regenerate Board
  </button>
  <svg [attr.viewBox]="getViewBox()" class="board">
    <!-- Debug grid (optional) -->
    <g class="debug-grid" *ngIf="showDebugGrid">
      <!-- Lines for debugging -->
    </g>

    <!-- Hexes -->
    <g *ngFor="let pos of hexes; let i = index">
      <!-- Render hex tiles first -->
      <polygon
        [attr.points]="getHexPoints(pos.position)"
        [class]="'hex ' + getHexClass(pos.terrain || TerrainType.Desert)"
        (click)="onHexClick(pos)"
      />

      <!-- Token (number and dots) -->
      <g *ngIf="pos.token !== null && pos.token !== undefined"
         [attr.transform]="'translate(' + getHexCenter(pos.position).x + ',' + getHexCenter(pos.position).y + ')'">
        <circle r="20" class="token-background"/>
        <text class="token-number" dy=".3em">{{pos.token}}</text>
        <text class="token-dots" dy="1.5em">{{getTokenDots(pos.token)}}</text>
      </g>
    </g>

    <!-- Render roads after tiles -->
    <g>
      <g *ngFor="let pos of hexes">
        <g *ngFor="let edge of getUniqueRoadPositions(pos)">
          <polygon
            [attr.points]="getRoadPoints(edge.start, edge.end)"
            class="road"
            (click)="onRoadClick({start: edge.start, end: edge.end})"
          />
        </g>
      </g>
    </g>

    <!-- Render settlements on top of everything -->
    <g>
      <g *ngFor="let pos of hexes">
        <g *ngFor="let settlementPos of getUniqueSettlementPositions(pos)">
          <polygon 
            [attr.points]="getSettlementPoints(settlementPos)"
            [class]="getSettlementClasses(settlementPos)"
            (click)="onSettlementClick(settlementPos)"
          />
        </g>
      </g>
    </g>
  </svg>
</div>